<form class="form" (ngSubmit)="onStart()" #gameForm="ngForm">
  <div class="Timeout field">
    <label for="timeInput">Timeout (ms, {{ minTimeout }}-{{ maxTimeout }}):</label>

    <div class="input--validated">
      <input
        id="timeInput"
        type="number"
        [(ngModel)]="timeLimit"
        name="timeLimit"
        #timeLimitInput="ngModel"
        [disabled]="isGameActive()"
        [min]="minTimeout"
        [max]="maxTimeout"
        required
        placeholder="Enter ms"
      />

      @if (timeLimitInput.invalid && (timeLimitInput.touched || timeLimitInput.dirty)) {
        <span class="error-tooltip">
          @if (timeLimitInput.errors?.['required']) {
            Timeout is required
          }
          @if (timeLimitInput.errors?.['min']) {
            Minimum value is {{ minTimeout }}ms
          }
          @if (timeLimitInput.errors?.['max']) {
            Maximum value is {{ maxTimeout }}ms
          }
        </span>
      }
    </div>
  </div>

  <div class="buttons">
    <button
      class="btn btn--start"
      type="submit"
      [disabled]="isGameActive() || gameForm.invalid"
      aria-label="Start game"
    >
      Start
    </button>
    <button
      class="btn btn--rules"
      type="button"
      (click)="openRules()"
      [disabled]="isGameActive()"
      aria-label="Show game rules"
    >
      Rules
    </button>
  </div>
</form>

@if (showRules()) {
  <app-game-rules-modal (closeRequested)="closeRules()" />
}
